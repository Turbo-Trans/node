{
  "info": {
    "title": "Logistics Management API",
    "version": "1.1.0",
    "description": "API endpoints for user management, warehouses, trucks, products. Updated to support pagination and dynamic filtering."
  },
  "authentication": {
    "type": "JWT",
    "header": "Authorization: Bearer <token>"
  },
  "endpoints": [
    {
      "name": "Login",
      "method": "POST",
      "url": "/login",
      "permission": "Public",
      "body": {
        "username": "string",
        "password": "string"
      },
      "responses": {
        "200": {
          "message": "Giris basarili",
          "token": "jwt-token",
          "user": {
            "userID": "number",
            "username": "string",
            "email": "string",
            "tel": "string",
            "cityID": "number",
            "address": "string",
            "job": "string",
            "warehouseID": "number"
          }
        },
        "400": { "message": "Bilgiler eksik!" },
        "401": { "message": "Kullanici bulunamadi / Yanlis sifre" },
        "500": { "message": "Sunucu hatasi" }
      }
    },
    {
      "name": "Logout",
      "method": "POST",
      "url": "/logout",
      "permission": "Authenticated User",
      "responses": {
        "200": { "message": "Cikis basarili" },
        "500": { "message": "Sunucu hatasi" }
      }
    },
    {
      "name": "Get Countries",
      "method": "GET",
      "url": "/getCountries",
      "permission": [1, 2],
      "responses": {
        "200": [
          {
            "countryID": "number",
            "countryName": "string",
            "phoneCode": "string"
          }
        ],
        "500": { "message": "Error message" }
      }
    },
    {
      "name": "Get Cities",
      "method": "GET",
      "url": "/getCities",
      "permission": [1, 2],
      "query": {
        "id": "number (CountryID - Required)"
      },
      "responses": {
        "200": [
          {
            "cityID": "number",
            "cityName": "string",
            "countryID": "number"
          }
        ],
        "400": { "message": "Bu işlem sadece ID ile çalışır" },
        "500": { "message": "Error message" }
      }
    },
    {
      "name": "Get Users (List)",
      "method": "GET",
      "url": "/getUsers",
      "permission": [1, 2],
      "query": {
        "page": "number (default: 1)",
        "limit": "number (default: 10, max: 100)",
        "username": "string (Partial Match)",
        "email": "string (Partial Match)",
        "job": "string (Partial Match)",
        "cityID": "number",
        "warehouseID": "number",
        "sortBy": "string (default: userID)",
        "sortOrder": "string (ASC or DESC)"
      },
      "responses": {
        "200": {
          "page": 1,
          "limit": 10,
          "total": 50,
          "totalPages": 5,
          "filters": {},
          "data": [
            {
              "userID": "number",
              "username": "string",
              "email": "string",
              "tel": "string",
              "address": "string",
              "job": "string",
              "cityID": "number",
              "warehouseID": "number"
            }
          ]
        },
        "404": { "message": "Kullanıcı bulunamadı." },
        "500": { "error": "Veritabanı hatası." }
      }
    },
    {
      "name": "Add User",
      "method": "POST",
      "url": "/addUser",
      "permission": [1],
      "description": "Password must contain at least 1 uppercase, 1 number, 1 special char, and be 8-64 chars long.",
      "body": {
        "username": "string (required)",
        "password": "string (required)",
        "permission": "number (required)",
        "email": "string",
        "tel": "string",
        "cityID": "number",
        "address": "string",
        "job": "string",
        "warehouseID": "number"
      },
      "responses": {
        "200": { "message": "Islem Basarili" },
        "400": { "message": "Validation error messages (password strength etc.)" },
        "500": { "error": "SQL Hatasi" }
      }
    },
    {
      "name": "Delete User",
      "method": "DELETE",
      "url": "/deleteUser",
      "permission": [1],
      "query": {
        "userID": "number (required)"
      },
      "responses": {
        "200": { "message": "Bilgiler basariyla silindi." },
        "400": { "message": "Kendini silemezsin / Transaction error" },
        "404": { "message": "Belirtilen UserID ile kayit bulunamadi." },
        "500": { "message": "Veritabanı hatası oluştu." }
      }
    },
    {
      "name": "List Warehouses",
      "method": "GET",
      "url": "/getWH",
      "permission": [1],
      "query": {
        "id": "number",
        "name": "string",
        "pageNo": "number (default: 1)"
      },
      "responses": {
        "200": {
          "success": true,
          "page": 1,
          "limit": 10,
          "total": 100,
          "totalPages": 10,
          "data": [
            {
              "warehouseID": "number",
              "warehouseName": "string",
              "warehouseAddress": "string",
              "cityName": "string",
              "countryName": "string"
            }
          ]
        },
        "404": { "message": "Hicbir depo kaydi bulunamadi." },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Add Warehouse",
      "method": "POST",
      "url": "/addWH",
      "permission": [1],
      "body": {
        "warehouseName": "string",
        "warehouseCityID": "number (required)",
        "warehouseAddress": "string"
      },
      "responses": {
        "201": { "message": "Depo basariyla eklendi.", "id": "number" },
        "400": { "message": "WarehouseCityID girilmesi zorunludur." },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Edit Warehouse",
      "method": "PUT",
      "url": "/editWH",
      "permission": [1],
      "query": { "id": "number (required)" },
      "body": {
        "warehouseName": "string",
        "warehouseCityID": "number",
        "warehouseAddress": "string"
      },
      "responses": {
        "200": { "message": "Depo bilgileri guncellendi." },
        "404": { "message": "Belirtilen ID ile depo bulunamadi." },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Delete Warehouse",
      "method": "DELETE",
      "url": "/deleteWH",
      "permission": [1],
      "query": { "id": "number (required)" },
      "responses": {
        "200": { "message": "Depo basariyla silindi." },
        "400": { "message": "Bu depoda urunler veya kullanicilar kayitli oldugu icin silinemez." },
        "404": { "message": "Belirtilen ID ile depo bulunamadi." },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Add Truck",
      "method": "POST",
      "url": "/addTruck",
      "permission": [1],
      "body": {
        "truckBrand": "string",
        "truckModel": "string"
      },
      "responses": {
        "201": { "message": "Kamyon basariyla eklendi.", "id": "number" },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Delete Truck",
      "method": "DELETE",
      "url": "/removeTruck",
      "permission": [1],
      "query": { "id": "number (required)" },
      "responses": {
        "200": { "message": "Kamyon basariyla silindi." },
        "400": { "message": "Bu kamyon modeli sisteme kayitli bir araca (TruckInfo) bagli oldugu icin silinemez." },
        "404": { "message": "Belirtilen ID ile kamyon bulunamadi." },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "List All Trucks",
      "method": "GET",
      "url": "/listTrucks",
      "permission": [1, 2],
      "query": {
        "page": "number (default: 1)",
        "limit": "number (default: 10)",
        "truckBrand": "string (Partial Match)",
        "truckModel": "string (Partial Match)"
      },
      "responses": {
        "200": {
          "data": [
            {
              "truckID": "number",
              "truckBrand": "string",
              "truckModel": "string"
            }
          ],
          "pagination": {
            "totalItems": "number",
            "totalPages": "number",
            "currentPage": "number",
            "itemsPerPage": "number"
          }
        },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Add Truck Info (Plate)",
      "method": "POST",
      "url": "/addTruckInfo",
      "permission": [1],
      "body": {
        "plate": "string (required)",
        "truckID": "number (required)"
      },
      "responses": {
        "201": { "message": "Arac bilgisi basariyla eklendi.", "id": "number" },
        "400": { "message": "Plaka ve TruckID girilmesi zorunludur." },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Edit Truck Info",
      "method": "PUT",
      "url": "/editTruckInfo",
      "permission": [1],
      "query": { "id": "number (required)" },
      "body": {
        "plate": "string",
        "truckID": "number"
      },
      "responses": {
        "200": { "message": "Arac bilgileri guncellendi." },
        "404": { "message": "Belirtilen ID ile arac bulunamadi." },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Delete Truck Info",
      "method": "DELETE",
      "url": "/removeTruckInfo",
      "permission": [1],
      "query": { "id": "number (required)" },
      "responses": {
        "200": { "message": "Arac basariyla silindi." },
        "400": { "message": "Bu arac bir kombinasyonda (Combination) kullanildigi icin silinemez." },
        "404": { "message": "Belirtilen ID ile arac bulunamadi." },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "List Truck Info",
      "method": "GET",
      "url": "/listTruckInfo",
      "permission": [1, 2],
      "query": {
        "page": "number (default: 1)",
        "limit": "number (default: 10)",
        "plate": "string (Partial Match)",
        "truckBrand": "string (Partial Match)",
        "truckModel": "string (Partial Match)"
      },
      "responses": {
        "200": {
          "data": [
            {
              "truckInfoID": "number",
              "plate": "string",
              "truckBrand": "string",
              "truckModel": "string"
            }
          ],
          "pagination": {
            "totalItems": "number",
            "totalPages": "number",
            "currentPage": "number",
            "itemsPerPage": "number"
          }
        },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Edit Product",
      "method": "PUT",
      "url": "/editProduct",
      "permission": [1],
      "query": { "id": "number" },
      "body": {
        "productShape": "string",
        "weight": "number",
        "dimensionX": "number",
        "dimensionY": "number",
        "dimensionZ": "number",
        "isBreakable": "boolean",
        "sender": "string",
        "warehouse": "number"
      },
      "responses": {
        "200": { "message": "Urun bilgileri guncellendi." },
        "404": { "message": "Urun bulunamadi." },
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "List All Products",
      "method": "GET",
      "url": "/listProducts",
      "permission": [1, 2],
      "description": "Returns products with joined warehouse and status details. No pagination.",
      "responses": {
        "200": [
          {
            "productID": "number",
            "productShape": "string",
            "weight": "number",
            "dimensionX": "number",
            "dimensionY": "number",
            "dimensionZ": "number",
            "isBreakable": "boolean",
            "sender": "string",
            "warehouse": "number",
            "warehouseName": "string",
            "statusID": "number",
            "statusName": "string",
            "statusDate": "datetime",
            "dateReceived": "datetime"
          }
        ],
        "500": { "error": "Veritabani hatasi." }
      }
    },
    {
      "name": "Create Order",
      "method": "POST",
      "url": "/createOrder",
      "permission": [1, 2],
      "description": "Creates a new order, combination, and itinerary. Validates that products exist, are in the user's warehouse, and have statusType=1.",
      "body": {
        "receiverID": "number (required)",
        "productIDs": "array of numbers (required, e.g., [1, 2, 3])",
        "truckInfoID": "number (required)",
        "trailerID": "number (required)",
        "kingPinOffset": "number (optional, default: 0)",
        "kingPinLimit": "number (optional, default: 0)"
      },
      "responses": {
        "201": {
          "message": "Sipariş, Kombinasyon ve Yolculuk planı başarıyla oluşturuldu.",
          "orderID": "number",
          "orderNumber": "string",
          "combinationID": "number",
          "itineraryID": "number"
        },
        "400": { "message": "Eksik bilgi / Ürün statüsü uygun değil." },
        "403": { "message": "Depo ataması yok veya ürün sizin deponuzda değil." },
        "404": { "message": "Alıcı, Araç veya Dorse bulunamadı." },
        "500": { "message": "Veritabanı hatası." }
      }
    },
    {
      "name": "List Orders",
      "method": "GET",
      "url": "/listOrders",
      "permission": [1, 2],
      "description": "Lists orders filtered by the user's warehouse. Supports pagination and searching.",
      "query": {
        "page": "number (default: 1)",
        "limit": "number (default: 10)",
        "orderNumber": "string (Partial Match)",
        "receiverName": "string (Partial Match)",
        "active": "number (0 or 1)"
      },
      "responses": {
        "200": {
          "success": true,
          "page": 1,
          "limit": 10,
          "total": 50,
          "totalPages": 5,
          "data": [
            {
              "orderID": "number",
              "orderNumber": "string",
              "receiverName": "string",
              "receiverAddress": "string",
              "receiverCity": "string",
              "receiverCountry": "string",
              "productCount": "number",
              "itineraryActive": "number (1 or 0)"
            }
          ]
        },
        "403": { "message": "Bir depoya atanmamışsınız." },
        "500": { "message": "Veritabanı hatası oluştu." }
      }
    },
    {
      "name": "Get Order Details",
      "method": "GET",
      "url": "/orderDetails",
      "permission": [1, 2],
      "description": "Returns detailed information about a specific order, including receiver, truck, trailer, and combination info.",
      "query": {
        "orderID": "number (required)"
      },
      "responses": {
        "200": {
          "orderInfo": { "orderID": "number", "orderNumber": "string" },
          "receiverInfo": { "name": "string", "address": "string", "city": "string", "country": "string" },
          "itineraryInfo": { "itineraryID": "number", "active": "boolean" },
          "combinationInfo": {
            "combinationID": "number",
            "kingPinOffset": "number",
            "kingPinLimit": "number",
            "truck": { "plate": "string", "brand": "string", "model": "string" },
            "trailer": {
              "dimensions": { "x": "number", "y": "number", "z": "number" },
              "weightLimit": "number",
              "axisDistance": "number"
            }
          }
        },
        "400": { "message": "OrderID giriniz." },
        "403": { "message": "Bu siparişe erişim izniniz yok." },
        "404": { "message": "Sipariş detayları bulunamadı." },
        "500": { "message": "Veritabanı hatası." }
      }
    },
    {
      "name": "Delete (Cancel) Order",
      "method": "DELETE",
      "url": "/deleteOrder",
      "permission": [1, 2],
      "description": "Soft deletes an order by setting the itinerary active status to 0.",
      "query": {
        "orderID": "number (required)"
      },
      "responses": {
        "200": { "message": "Sipariş başarıyla iptal edildi (Itinerary pasife alındı)." },
        "400": { "message": "OrderID giriniz." },
        "403": { "message": "Yetkisiz işlem." },
        "404": { "message": "Aktif yolculuk kaydı bulunamadı." },
        "500": { "message": "Veritabanı hatası." }
      }
    },
    {
      "name": "Add Trailer",
      "method": "POST",
      "url": "/addTrailer",
      "permission": [1],
      "body": {
        "dimensionX": "number (required)",
        "dimensionY": "number (required)",
        "dimensionZ": "number (required)",
        "wlimit": "number (required)",
        "axis_d": "number (optional)",
        "wlimitBack": "number (optional)",
        "wlimitFront": "number (optional)"
      },
      "responses": {
        "201": { "message": "Dorse başarıyla eklendi.", "id": "number" },
        "400": { "message": "Boyutlar ve ağırlık limiti zorunludur." },
        "500": { "error": "Veritabanı hatası." }
      }
    },
    {
      "name": "Delete Trailer",
      "method": "DELETE",
      "url": "/removeTrailer",
      "permission": [1],
      "query": {
        "id": "number (required)"
      },
      "responses": {
        "200": { "message": "Dorse başarıyla silindi." },
        "400": { "message": "Bu dorse kullanımda olduğu için silinemez." },
        "404": { "message": "Belirtilen ID ile dorse bulunamadı." },
        "500": { "error": "Veritabanı hatası." }
      }
    },
    {
      "name": "List Trailers",
      "method": "GET",
      "url": "/listTrailers",
      "permission": [1, 2],
      "query": {
        "page": "number (default: 1)",
        "limit": "number (default: 10)"
      },
      "responses": {
        "200": {
          "success": true,
          "page": 1,
          "limit": 10,
          "total": "number",
          "totalPages": "number",
          "data": [
            {
              "trailerID": "number",
              "dimensionX": "number",
              "dimensionY": "number",
              "dimensionZ": "number",
              "wlimit": "number"
            }
          ]
        },
        "500": { "error": "Veritabanı hatası." }
      }
    },
    {
      "name": "Create Receiver",
      "method": "POST",
      "url": "/createReceiver",
      "permission": [1, 2],
      "body": {
        "receiverName": "string (required)",
        "receiverCityID": "number (required)",
        "receiverAddress": "string (required)"
      },
      "responses": {
        "201": { "message": "Alıcı başarıyla oluşturuldu.", "receiverID": "number" },
        "400": { "message": "Eksik bilgi." },
        "404": { "message": "Geçersiz Şehir ID." },
        "500": { "error": "Veritabanı hatası." }
      }
    },
    {
      "name": "Delete Receiver",
      "method": "DELETE",
      "url": "/removeReceiver",
      "permission": [1],
      "query": {
        "id": "number (required)"
      },
      "responses": {
        "200": { "message": "Alıcı başarıyla silindi." },
        "400": { "message": "Bu alıcıya ait siparişler var, silinemez." },
        "404": { "message": "Alıcı bulunamadı." },
        "500": { "error": "Veritabanı hatası." }
      }
    },
    {
      "name": "List Receivers",
      "method": "GET",
      "url": "/listReceivers",
      "permission": [1, 2],
      "query": {
        "page": "number (default: 1)",
        "limit": "number (default: 10)",
        "name": "string (Partial Match)",
        "city": "string (Partial Match)",
        "country": "string (Partial Match)"
      },
      "responses": {
        "200": {
          "success": true,
          "page": 1,
          "limit": 10,
          "total": "number",
          "totalPages": "number",
          "data": [
            {
              "receiverID": "number",
              "receiverName": "string",
              "receiverAddress": "string",
              "cityID": "number",
              "cityName": "string",
              "countryID": "number",
              "countryName": "string"
            }
          ]
        },
        "500": { "error": "Veritabanı hatası." }
      }
    },
    {
    "name": "Send Verification Code",
    "method": "POST",
    "url": "/sendcode",
    "permission": "Authenticated User",
    "description": "Sends a 4-digit verification code to the registered email. Rate limited to 1 request per minute.",
    "responses": {
      "200": { "message": "Dogrulama kodu gonderildi" },
      "400": { "message": "Secili bir mail adresiniz yok / Zaten dogrulanmissiniz" },
      "429": { "message": "Her dakika bir kod gönderebilirsiniz!" },
      "500": { "message": "Sunucu hatasi" }
    }
  },
  {
    "name": "Verify Code",
    "method": "POST",
    "url": "/verify",
    "permission": "Authenticated User",
    "description": "Verifies the user account using the 4-digit code sent via email. Code expires in 15 minutes.",
    "body": {
      "code": "string (required)"
    },
    "responses": {
      "200": { "message": "Dogrulama Islemi Basarili" },
      "400": { "message": "Lutfen kod girin / Yanlis kod / Kod suresi dolmus" },
      "500": { "message": "Veritabani Hatasi" }
    }
  }
  ]
}